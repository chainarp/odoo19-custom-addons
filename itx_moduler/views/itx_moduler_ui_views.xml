<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========================================== -->
    <!-- ITX Moduler View Views -->
    <!-- ========================================== -->

    <record id="view_itx_moduler_view_tree" model="ir.ui.view">
        <field name="name">itx.moduler.view.tree</field>
        <field name="model">itx.moduler.view</field>
        <field name="arch" type="xml">
            <list string="Views">
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="model_id"/>
                <field name="view_type" widget="badge"/>
                <field name="mode"/>
                <field name="field_count"/>
                <field name="state" widget="badge"/>
            </list>
        </field>
    </record>

    <record id="view_itx_moduler_view_form" model="ir.ui.view">
        <field name="name">itx.moduler.view.form</field>
        <field name="model">itx.moduler.view</field>
        <field name="arch" type="xml">
            <form string="View">
                <header>
                    <button name="action_validate" string="Validate" type="object"
                            class="btn-primary" invisible="state != 'draft'"/>
                    <button name="action_apply_to_odoo" string="Apply to Odoo" type="object"
                            class="btn-success" invisible="state not in ('validated', 'applied')"/>
                    <button name="action_generate_xml" string="Generate XML" type="object"
                            class="btn-info"/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,validated,applied,exported"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="module_id"/>
                            <field name="model_id"/>
                        </group>
                        <group>
                            <field name="view_type"/>
                            <field name="mode"/>
                            <field name="sequence"/>
                            <field name="inherit_id" invisible="mode != 'extension'"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Architecture (XML)" name="arch">
                            <field name="arch" widget="ace" options="{'mode': 'xml'}"
                                   placeholder="Leave empty to auto-generate from fields..."/>
                        </page>

                        <page string="Fields (Simple Mode)" name="fields">
                            <field name="field_ids">
                                <list editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="field_id" domain="[('model_id', '=', parent.model_id)]"/>
                                    <field name="invisible"/>
                                    <field name="readonly"/>
                                    <field name="required"/>
                                    <field name="widget"/>
                                </list>
                            </field>
                        </page>

                        <page string="AI Prompt" name="ai" invisible="not created_by_ai">
                            <field name="ai_prompt"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="action_itx_moduler_view" model="ir.actions.act_window">
        <field name="name">Views</field>
        <field name="res_model">itx.moduler.view</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Menu: Removed - access via workspace -->
    <!--
    <menuitem id="menu_itx_moduler_view"
              name="Views"
              parent="itx_moduler.itx_moduler_main_menu"
              action="action_itx_moduler_view"
              sequence="20"/>
    -->

    <!-- ========================================== -->
    <!-- ITX Moduler Menu Views -->
    <!-- ========================================== -->

    <record id="view_itx_moduler_menu_tree" model="ir.ui.view">
        <field name="name">itx.moduler.menu.tree</field>
        <field name="model">itx.moduler.menu</field>
        <field name="arch" type="xml">
            <list string="Menus">
                <field name="sequence" widget="handle"/>
                <field name="complete_name"/>
                <field name="module_id"/>
                <field name="action_id"/>
                <field name="state" widget="badge"/>
            </list>
        </field>
    </record>

    <record id="view_itx_moduler_menu_form" model="ir.ui.view">
        <field name="name">itx.moduler.menu.form</field>
        <field name="model">itx.moduler.menu</field>
        <field name="arch" type="xml">
            <form string="Menu">
                <header>
                    <button name="action_validate" string="Validate" type="object"
                            class="btn-primary" invisible="state != 'draft'"/>
                    <button name="action_apply_to_odoo" string="Apply to Odoo" type="object"
                            class="btn-success" invisible="state not in ('validated', 'applied')"/>
                    <button name="action_generate_xml" string="Generate XML" type="object"
                            class="btn-info"/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,validated,applied,exported"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="module_id"/>
                            <field name="sequence"/>
                        </group>
                        <group>
                            <field name="parent_id"/>
                            <field name="parent_odoo_menu_id"/>
                            <field name="action_id"/>
                        </group>
                    </group>

                    <group string="Display">
                        <field name="web_icon"/>
                        <field name="group_ids" widget="many2many_tags"/>
                    </group>

                    <group string="Submenus" invisible="not child_ids">
                        <field name="child_ids" nolabel="1">
                            <list>
                                <field name="sequence" widget="handle"/>
                                <field name="name"/>
                                <field name="action_id"/>
                            </list>
                        </field>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="action_itx_moduler_menu" model="ir.actions.act_window">
        <field name="name">Menus</field>
        <field name="res_model">itx.moduler.menu</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Menu: Removed - access via workspace -->
    <!--
    <menuitem id="menu_itx_moduler_menu"
              name="Menus"
              parent="itx_moduler.itx_moduler_main_menu"
              action="action_itx_moduler_menu"
              sequence="30"/>
    -->

    <!-- ========================================== -->
    <!-- ITX Moduler Action Window Views -->
    <!-- ========================================== -->

    <record id="view_itx_moduler_action_window_tree" model="ir.ui.view">
        <field name="name">itx.moduler.action.window.tree</field>
        <field name="model">itx.moduler.action.window</field>
        <field name="arch" type="xml">
            <list string="Actions">
                <field name="name"/>
                <field name="model_id"/>
                <field name="view_mode"/>
                <field name="module_id"/>
                <field name="state" widget="badge"/>
            </list>
        </field>
    </record>

    <record id="view_itx_moduler_action_window_form" model="ir.ui.view">
        <field name="name">itx.moduler.action.window.form</field>
        <field name="model">itx.moduler.action.window</field>
        <field name="arch" type="xml">
            <form string="Window Action">
                <header>
                    <button name="action_validate" string="Validate" type="object"
                            class="btn-primary" invisible="state != 'draft'"/>
                    <button name="action_apply_to_odoo" string="Apply to Odoo" type="object"
                            class="btn-success" invisible="state not in ('validated', 'applied')"/>
                    <button name="action_test" string="Test Action" type="object"
                            class="btn-info" invisible="state != 'applied'"/>
                    <button name="action_generate_xml" string="Generate XML" type="object"
                            class="btn-info"/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,validated,applied,exported"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="module_id"/>
                            <field name="model_id"/>
                        </group>
                        <group>
                            <field name="view_mode"/>
                            <field name="target"/>
                            <field name="limit"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Views" name="views">
                            <field name="view_ids" widget="many2many_tags"
                                   domain="[('model_id', '=', model_id)]"/>
                            <field name="search_view_id"
                                   domain="[('model_id', '=', model_id), ('view_type', '=', 'search')]"/>
                        </page>

                        <page string="Domain &amp; Context" name="domain_context">
                            <group>
                                <field name="domain" widget="ace" options="{'mode': 'python'}"
                                       placeholder="[]"/>
                                <field name="context" widget="ace" options="{'mode': 'python'}"
                                       placeholder="{}"/>
                            </group>
                        </page>

                        <page string="Help" name="help">
                            <field name="help" widget="html"
                                   placeholder="Help text shown when no records..."/>
                        </page>

                        <page string="Binding" name="binding">
                            <group>
                                <field name="binding_model_id"/>
                                <field name="binding_type"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="action_itx_moduler_action_window" model="ir.actions.act_window">
        <field name="name">Actions</field>
        <field name="res_model">itx.moduler.action.window</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Menu: Removed - access via workspace -->
    <!--
    <menuitem id="menu_itx_moduler_action"
              name="Actions"
              parent="itx_moduler.itx_moduler_main_menu"
              action="action_itx_moduler_action_window"
              sequence="40"/>
    -->

</odoo>
